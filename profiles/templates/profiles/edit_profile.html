{% extends 'base.html' %}
{% load static %}
{% block content %}
<!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/gijgo@1.9.14/js/gijgo.min.js" type="text/javascript"></script>
<link href="https://cdn.jsdelivr.net/npm/gijgo@1.9.14/css/gijgo.min.css" rel="stylesheet" type="text/css" />
        <script src="https://unpkg.com/gijgo@1.9.14/js/messages/messages.ru-ru.js" type="text/javascript"></script>
<div class="container mt-5">
    <h2>Edit Profile</h2>
    <button onclick="showSection('basic_info')">Basic Info</button>
    <button onclick="showSection('avatar')">Avatar</button>
    <button onclick="showSection('about_me')">About Me</button>
    <button onclick="showSection('change_password')">Change Password</button>

    <form method="post" id="profile_form">
        {% csrf_token %}
        <div id="basic_info_section" style="display: none;">
            <div id="nameFields"></div>
            <div style="display:none;">
                <label for="full_name">Full Name:</label><br>
                <input id="full_name" type="text" name="full_name" maxlength="300" value="{{ form.instance.full_name }}">
            </div>

            <div class="mb-3">
                <label for="sex" class="form-label">Sex:</label>
                <select id="sex"  name="sex" class="form-select">
                    <option value="M" {% if form.instance.sex == 'M' %} selected {% endif %}>Male</option>
                    <option value="F" {% if form.instance.sex == 'F' %} selected {% endif %}>Female</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="country" class="form-label">Country:</label>
                <select id="country" name="country" class="form-select">
                    {% for country in form.country.field.queryset %}
                    <option value="{{ country.id }}" {% if country.id == form.instance.country.id %} selected {% endif %}>{{ country.name }}</option>
                    {% endfor %}
                </select>
            </div>

            <div id="city_div" style="display:block;" class="mb-3">
                <label for="city" class="form-label">City:</label>
                <select id="city" name="city" class="form-select">
                    <option value="">Select City</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="birth_date" class="form-label">Birth Date:</label>
                <input id="birth_date" type="text" name="birth_date" class="form-control" value="{{ form.instance.birth_date }}">
            </div>
        </div>
        <div id="avatar_section" style="display: none;">
            <div class="mb-3">
                <label for="avatar" class="form-label">Avatar:</label>
                <br>
                <img id="avatarPreview" src="#" alt="Avatar Preview"
                     class="avatar-preview img-thumbnail">
                <input id="avatar" type="file" name="avatar" class="form-control">
            </div>
        </div>
        <div id="about_me_section" style="display: none;">
            <div class="mb-3">
                <label for="bio" class="form-label">Bio:</label>
                <textarea id="bio" name="bio" rows="3" class="form-control"></textarea>
            </div>
        </div>
        <div id="change_password_section" style="display: none;">
            <!-- Change Password Fields -->
            <!-- Add your change password fields here -->
        </div>
        <button type="submit">Save</button>
        <a href="">Cancel</a>
    </form>
</div>

<script>
    var currentSection = null;

    function showSection(sectionName) {
        if (currentSection !== null) {
            currentSection.style.display = 'none';
        }

        var newSection = document.getElementById(sectionName + '_section');

        newSection.style.display = 'block';
        currentSection = newSection;
    }
</script>




<script src="{% static 'js/get_cities_country.js' %}"></script>
<script src="{% static 'js/make_full_name.js'%}"></script>
<script src="{% static 'js/preview_avatar.js' %}"></script>
<!--<script src="{% static 'js/form_validation.js' %}"></script>-->
<script src="{% static 'js/datepicker.js' %}"></script>
{% endblock %}
